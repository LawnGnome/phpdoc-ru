<?xml version="1.0" encoding="utf-8"?>
<!-- EN-Revision: n/a Maintainer: blindman Status: ready -->
<!-- $Revision$ -->
<!-- splitted from ./en/functions/curl.xml, last change in rev 1.1 -->
  <refentry xml:id="function.curl-setopt" xmlns="http://docbook.org/ns/docbook">
   <refnamediv>
    <refname>curl_setopt</refname>
    <refpurpose>Устанавливает параметр для сеанса CURL</refpurpose>
   </refnamediv>
   <refsect1>
    <title>Описание</title>
     <methodsynopsis>
      <type>bool</type><methodname>curl_setopt</methodname>
      <methodparam><type>resource</type><parameter>ch</parameter></methodparam>
      <methodparam><type>string</type><parameter>option</parameter></methodparam>
      <methodparam><type>mixed</type><parameter>value</parameter></methodparam>
     </methodsynopsis>
    <para>
     Функция <function>curl_setopt</function> Устанавливает параметр для 
     сеанса CURL, заданного аргументом <parameter>ch</parameter>.  
     Аргумент <parameter>option</parameter> задает устанавливаемый 
     параметр, а  <parameter>value</parameter> - его значение.
    </para>
    <para>
     Для перечисленных ниже параметров, <parameter>value</parameter> 
     должен быть целым числом:
     <itemizedlist>
      <listitem>
       <simpara>
        <parameter>CURLOPT_INFILESIZE</parameter>: при закачке файла на 
        удаленный сервер, следует использовать этот параметр для указания 
        ожидаемого размера файла.
       </simpara>
      </listitem>
      <listitem>
       <simpara>
        <parameter>CURLOPT_VERBOSE</parameter>: При установке этого 
        параметра в ненулевое значение cURL будет выводить подробные 
        сообщения о всех производимых действиях.
       </simpara>
      </listitem>
      <listitem>
       <simpara>
        <parameter>CURLOPT_HEADER</parameter>: При установке этого 
        параметра в ненулевое значение результат будет включать полученные 
        заголовки.
       </simpara>
      </listitem>
      <listitem>
       <para>
        <parameter>CURLOPT_NOPROGRESS</parameter>: При установке этого 
        параметра в ненулевое значение не будет выводиться индикатор 
        прогресса операции.
        <note>
         <simpara>
          В PHP этот параметр устанавливается в ненулевое значение по 
          умолчнию. Изменять его значение рекомендуется только при 
          отладке.
         </simpara>
        </note>
       </para>
      </listitem>
      <listitem>
       <simpara>
        <parameter>CURLOPT_NOBODY</parameter>: При установке этого 
        параметра в ненулевое значение результат не будет включать
        документ (например, вам нужно получить только заголовки).
       </simpara>
      </listitem>
      <listitem>
       <simpara>
        <parameter>CURLOPT_FAILONERROR</parameter>: При установке этого 
        параметра в ненулевое значение, получение HTTP кода
        более 300 считается ошибкой.
       </simpara>
      </listitem>
      <listitem>
       <simpara>
        <parameter>CURLOPT_UPLOAD</parameter>: Установка этого 
        параметра в ненулевое значение означает, что будет производиться 
        закачка файла на удаленный сервер.
       </simpara>
      </listitem>
      <listitem>
       <simpara>
        <parameter>CURLOPT_POST</parameter>: При установке этого 
        параметра в ненулевое значение будет отправлен HTTP запрос методом POST 
        типа <literal>application/x-www-form-urlencoded</literal>, 
        используемый браузерами при отправке форм.
       </simpara>
      </listitem>
      <listitem>
       <simpara>
        <parameter>CURLOPT_FTPLISTONLY</parameter>: При установке этого 
        параметра в ненулевое значение будет получен список файлов в 
        директории FTP сервера.
       </simpara>
      </listitem>
      <listitem>
       <simpara>
        <parameter>CURLOPT_FTPAPPEND</parameter>: При установке этого 
        параметра в ненулевое значение данные будут добавляться к файлу на 
        FTP сервере, в противном случае файл будет перезаписан.
       </simpara>
      </listitem>
      <listitem>
       <simpara>
        <parameter>CURLOPT_NETRC</parameter>: При установке этого 
        параметра в ненулевое значение будет сделана попытка найти имя 
        пользователя и пароль к удаленному серверу в файле 
        <filename>~./netrc</filename>.
       </simpara>
      </listitem>
      <listitem>
       <simpara>
        <parameter>CURLOPT_FOLLOWLOCATION</parameter>: При установке этого 
        параметра в ненулевое значение, при получении HTTP заголовка 
        "Location: " будет происходить перенаправление на указанный этим 
        заголовком URL (это действие выполняется рекурсивно, для каждого 
        полученного заголовка "Location:").
       </simpara>
      </listitem>
      <listitem>
       <simpara>
        <parameter>CURLOPT_PUT</parameter>: При установке этого 
        параметра в ненулевое значение, будет производиться закачка файла 
        методом HTTP PUT. Файл задается параметрами 
        <parameter>CURLOPT_INFILE</parameter> и
        <parameter>CURLOPT_INFILESIZE</parameter>.
       </simpara>
      </listitem>
      <listitem>
       <simpara>
        <parameter>CURLOPT_MUTE</parameter>: При установке этого 
        параметра в ненулевое значение, все сообщения cURL будут 
        подавляться.
       </simpara>
      </listitem>
      <listitem>
       <simpara>
        <parameter>CURLOPT_TIMEOUT</parameter>: Задает масимальное время 
        выполнения операции в секундах.
       </simpara>
      </listitem>
      <listitem>
       <simpara>
        <parameter>CURLOPT_LOW_SPEED_LIMIT</parameter>: Задает минимальную 
        скорость передачи в байтах в секунду. Если в течении времени, 
        заданного параметром 
        <parameter>CURLOPT_LOW_SPEED_TIME</parameter>, скорость передачи 
        будет меньше этого значения, операция будет прервана.
       </simpara>
      </listitem>
      <listitem>
       <simpara>
        <parameter>CURLOPT_LOW_SPEED_TIME</parameter>: Задает время в 
        секундах, в течение которого скорость передачи должна быть ниже, 
        чем <parameter>CURLOPT_LOW_SPEED_LIMIT</parameter>, чтобы операция 
        была признана слишком медленной и прервана.
       </simpara>
      </listitem>
      <listitem>
       <simpara>
        <parameter>CURLOPT_RESUME_FROM</parameter>: Задает позицию в файле 
        в байтах, с которой начнется передача данных.
       </simpara>
      </listitem>
      <listitem>
       <simpara>
        <parameter>CURLOPT_CAINFO</parameter>: Имя файла, содержащего один 
        или более сертификатов, которые будут использованы при проверке 
        подлинности удаленного сервера. Имеет значение только совместно с 
        параметром <parameter>CURLOPT_SSL_VERIFYPEER</parameter>.
       </simpara>
      </listitem>
      <listitem>
       <simpara>
        <parameter>CURLOPT_SSL_VERIFYPEER</parameter>: Установите этот 
        параметр в ноль, чтобы запретить проверку сертификата удаленного 
        сервера (начиная с curl 7.10, по умолчанию этот параметр имеет 
        значение &true;). Дополнительные сертификаты можно задать с 
        помощью параметра <parameter>CURLOPT_CAINFO</parameter> 
        (добавленного в in curl 7.9.8). Можно также указать путь к файлам 
        сертификатов в параметре <parameter>CURLOPT_CAPATH</parameter>.
        Если <parameter>CURLOPT_SSL_VERIFYPEER</parameter> установлен в 0, 
        возможно, также потребуется установить 
        <parameter>CURLOPT_SSL_VERIFYHOST</parameter> в 1 или 0 (по 
        умолчанию 2).
       </simpara>
      </listitem>
      <listitem>
       <simpara>
        <parameter>CURLOPT_SSLVERSION</parameter>: Целое число, 
        указывающее, какую версию SSL использовать (2 или 3). По умолчанию 
        версия SSL определяется автоматически, но в некоторых случаях 
        требуется явное указание.
       </simpara>
      </listitem>
      <listitem>
       <simpara>
        <parameter>CURLOPT_SSL_VERIFYHOST</parameter>: Задает проверку 
        имени, указанного в сертификате удаленного сервера, при 
        установлении SSL соединения. Значение 1 означает проверку 
        существования имени, значение 2 - кроме того, и проверку 
        соответствия имени хоста.
       </simpara>
      </listitem>
      <listitem>
       <simpara>
        <parameter>CURLOPT_TIMECONDITION</parameter>: Задает способ 
        интерпретации значения параметра 
        <parameter>CURLOPT_TIMEVALUE</parameter>. Возможные значения:
         TIMECOND_IFMODSINCE или TIMECOND_ISUNMODSINCE.  Применяется 
         только для протокола HTTP.
       </simpara>
      </listitem>
      <listitem>
       <simpara>
        <parameter>CURLOPT_TIMEVALUE</parameter>: Задает время в секундах 
        с 1 января 1970 г. Это значение будет использовано в соответствии 
        со значением параметра <parameter>CURLOPT_TIMECONDITION</parameter>
        (по умолчанию TIMECOND_IFMODSINCE).
       </simpara>
      </listitem>
      <listitem>
       <simpara>
        <parameter>CURLOPT_RETURNTRANSFER</parameter>: При установке этого 
        параметра в ненулевое значение CURL будет возвращать результат, а 
        не выводить его.
       </simpara>
      </listitem>
     </itemizedlist>
    </para>
    <para>
     Для перечисленных ниже параметров, <parameter>value</parameter> 
     должен быть строкой:
     <itemizedlist>
      <listitem>
       <simpara>
        <parameter>CURLOPT_URL</parameter>: URL, с которым будет 
        производиться операция. Значение этого параметра также может  быть 
        задано в вызове функции <function>curl_init</function>.
       </simpara>
      </listitem>
      <listitem>
       <simpara>
        <parameter>CURLOPT_USERPWD</parameter>: Стока с именем 
        пользователя и паролем в виде [username]:[password].
       </simpara>
      </listitem>
      <listitem>
       <simpara>
        <parameter>CURLOPT_PROXYUSERPWD</parameter>: Стока с именем 
        пользователя и паролем к HTTP прокси-серверу в виде 
        [username]:[password].
       </simpara>
      </listitem>
      <listitem>
       <simpara>
        <parameter>CURLOPT_RANGE</parameter>: Задает участок файла, 
        который нужно загрузить, в формате "X-Y" , причем X или Y 
        могут быть опущены. Протокол HTTP также поддерживает передачу 
        нескольких фрагментов файла, это задается в виде "X-Y,N-M".
       </simpara>
      </listitem>
      <listitem>
       <simpara>
        <parameter>CURLOPT_POSTFIELDS</parameter>: Строка, содержащая 
        данные для  HTTP POST запроса.
       </simpara>
      </listitem>
      <listitem>
       <simpara>
        <parameter>CURLOPT_REFERER</parameter>: Задает значение HTTP 
        заголовка "Referer: ".
       </simpara>
      </listitem>
      <listitem>
       <simpara>
        <parameter>CURLOPT_USERAGENT</parameter>: Задает значение HTTP 
        заголовка "User-Agent: ".
       </simpara>
      </listitem>
      <listitem>
       <simpara>
        <parameter>CURLOPT_FTPPORT</parameter>: Задает значение, которое 
        будет использоваться для определения IP адреса для команды "PORT" 
        протокола ftp. Команда "PORT"  сообщает серверу, с каким IP 
        адресом он должен устанавливать соединение. Это может быть IP 
        адрес, имя хоста, имя сетевого интерфейса (под Unix), или просто 
        '-' для использования IP адреса по умолчанию.
       </simpara>
      </listitem>
      <listitem>
       <simpara>
        <parameter>CURLOPT_COOKIE</parameter>: Содержимое заголовка 
        "Cookie: ", который будет отправлен с HTTP запросом.
       </simpara>
      </listitem>
      <listitem>
       <simpara>
        <parameter>CURLOPT_SSLCERT</parameter>: Имя файла с сертификатом в 
        формате PEM.
       </simpara>
      </listitem>
      <listitem>
       <simpara>
        <parameter>CURLOPT_SSLCERTPASSWD</parameter>: Пароль к файлу 
        сертификата, заданному параметром 
        <parameter>CURLOPT_SSLCERT</parameter>.
       </simpara>
      </listitem>
      <listitem>
       <simpara>
        <parameter>CURLOPT_COOKIEFILE</parameter>: Имя файла, содержащего 
        данные cookie. Данные могут быть либо в формате  Netscape, либо 
        просто HTTP-заголовки.
       </simpara>
      </listitem>
      <listitem>
       <para>
        <parameter>CURLOPT_CUSTOMREQUEST</parameter>: Задает специальный 
        метод, который будет использован в HTTP запросе 
        вместо<literal>GET</literal> или <literal>HEAD</literal>. Это 
        используется для отправке запросов <literal>DELETE</literal> или 
        других, редко используемых. Допустимыми зачениями являются
        <literal>GET</literal>, <literal>POST</literal>, и т.д; 
        не передавайте полный HTTP запрос в этом параметре. Например,
        'GET /index.html HTTP/1.0\r\n\r\n' недопустимо.
        <note>
         <simpara>
          Перед использованием этого параметра убедитесь, что сервер, к 
          которому вы обращаетесь, поддерживает требуемый метод.
         </simpara>
        </note>
       </para>
      </listitem>
      <listitem>
       <para>
        <parameter>CURLOPT_PROXY</parameter>: Имя HTTP прокси, через 
        который будут направляться запросы.
       </para>
      </listitem>
      <listitem>
       <para>
        <parameter>CURLOPT_INTERFACE</parameter>: Имя используемого 
        сетевого интерфейса. Может быть именем интерфейса, IP адресом или 
        именем хоста.
       </para>
      </listitem>
      <listitem>
       <para>
        <parameter>CURLOPT_KRB4LEVEL</parameter>: Уровень безопасности 
        KRB4 (Kerberos 4). Допустимы следующие значения (в порядке 
        возрастания безопасности) : 'clear', 'safe', 
        'confidential', 'private'. Если переданное значение не входит в 
        этот список, используется 'private'. Установка этого параметра в
        <literal>NULL</literal>, запрещает безопасность KRB4 . В настоящее 
        время безопасность KRB4 поддерживается только для протокола FTP.
       </para>
      </listitem>
      <listitem>
       <para>
        <parameter>CURLOPT_HTTPHEADER</parameter>: Массив с HTTP 
        заголовками.
       </para>
      </listitem>
      <listitem>
       <para>
        <parameter>CURLOPT_QUOTE</parameter>: Массив с FTP командами, 
        которые будут выполнены перед выполнением основного запроса.
       </para>
      </listitem>
      <listitem>
       <para>
        <parameter>CURLOPT_POSTQUOTE</parameter>: Массив с FTP командами, 
        которые будут выполнены после выполнения основного запроса.
       </para>
      </listitem>
     </itemizedlist>
    </para>
    <para>
     Для перечисленных ниже параметров, <parameter>value</parameter> 
     должен быть дескриптором файла, возвращенным функцией 
     <function>fopen</function>:
     <itemizedlist>
      <listitem>
       <simpara>
        <parameter>CURLOPT_FILE</parameter>: Файл, в который будет выведен 
        результат операции. По умолчанию STDOUT.
       </simpara>
      </listitem>
      <listitem>
       <simpara>
        <parameter>CURLOPT_INFILE</parameter>: Файл, содержащий данные для 
        передачи.
       </simpara>
      </listitem>
      <listitem>
       <simpara>
        <parameter>CURLOPT_WRITEHEADER</parameter>: Файл, в который будут
        выведены полученные заголовки.
       </simpara>
      </listitem>
      <listitem>
       <simpara>
        <parameter>CURLOPT_STDERR</parameter>: Файл, в который будут 
        выводиться сообщения об ошибках. По умолчанию STDERR.
       </simpara>
      </listitem>
     </itemizedlist>
     <example>
      <title>
       Инициализация сеанса CURL и загрузка web-страницы
      </title>
      <programlisting role="php">
<![CDATA[
<?php
// инициализация сеанса
$ch = curl_init();

// установка URL и других необходимых параметров
curl_setopt($ch, CURLOPT_URL, "http://www.example.com/");
curl_setopt($ch, CURLOPT_HEADER, 0);

// загрузка страницы и выдача её браузеру
curl_exec($ch);

// завершение сеанса и освобождение ресурсов
curl_close($ch);
?>
]]>
      </programlisting>
     </example>
    </para>
   </refsect1>
  </refentry>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"../~/.phpdoc/manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
vim600: syn=xml fen fdm=syntax fdl=2 si
vim: et tw=78 syn=sgml
vi: ts=1 sw=1
-->
