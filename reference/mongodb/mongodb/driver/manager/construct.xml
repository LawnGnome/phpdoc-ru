<?xml version="1.0" encoding="utf-8"?>
<!-- $Revision$ -->
<!-- EN-Revision: 345214 Maintainer: lex Status: ready -->
<!-- Reviewed: no -->

<refentry xml:id="mongodb-driver-manager.construct" xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">
 <refnamediv>
  <refname>MongoDB\Driver\Manager::__construct</refname>
  <refpurpose>Создает новый Manager MongoDB</refpurpose>
 </refnamediv>
 
 <refsect1 role="description">
  &reftitle.description;
  <methodsynopsis>
   <modifier>final</modifier> <modifier>public</modifier> <methodname>MongoDB\Driver\Manager::__construct</methodname>
   <methodparam choice="opt"><type>string</type><parameter>uri</parameter><initializer>"mongodb://127.0.0.1/</initializer></methodparam>
   <methodparam choice="opt"><type>array</type><parameter>uriOptions</parameter><initializer>array()</initializer></methodparam>
   <methodparam choice="opt"><type>array</type><parameter>driverOptions</parameter><initializer>array()</initializer></methodparam>
  </methodsynopsis>
  <para>
   Создает новый объект <classname>MongoDB\Driver\Manager</classname> с переданными параметрами.
  </para>
  <note>
   <simpara>
    В <link xlink:href="&url.mongodb.sdam;#single-threaded-client-construction">спецификации по обнаружению и мониторингу сервера</link>,
    этот конструктор не выполняет ввода-вывода. Соединения будут инициализироваться по требованию,
    когда выполняется первая операция.
   </simpara>
  </note>
  &mongodb.note.forking;
 </refsect1>
 
 <refsect1 role="parameters">
  &reftitle.parameters;
  <variablelist>
   <varlistentry xml:id="mongodb-driver-manager.construct-uri">
    <term><parameter>uri</parameter></term>
    <listitem>
     <para>
      URI-адрес подключения <link xlink:href="&url.mongodb.docs;reference/connection-string/">mongodb://</link>:
      <programlisting role="txt">
<![CDATA[
mongodb://[username:password@]host1[:port1][,host2[:port2],...[,hostN[:portN]]][/[database][?options]]
]]>
      </programlisting>
     </para>
     <para>
      Подробнее о поддерживаемых параметрах, см. раздел
      <link xlink:href="&url.mongodb.docs;reference/connection-string/#connections-connection-options">Параметры строки подключения</link>
      в руководстве MongoDB.
      <link xlink:href="&url.mongodb.docs;reference/connection-string/#connection-pool-options">Параметры пула подключения</link>
      не поддерживаются, т.к. PHP-драйвер не реализует пулы подключений.
     </para>
     <para>
      <parameter>uri</parameter> - это URL, поэтому любые специальные символы в
      его компонентах должны закодированы в соответствии
      <link xlink:href="&url.rfc;3986">RFC 3986</link>. Это особенно
      актуально для имени пользователя и пароля, которые часто могут содержать специальные
      символы, такие как <literal>@</literal>, <literal>:</literal>, или
      <literal>%</literal>. При подключении через доменный сокет Unix, путь
      сокета может содержать специальные символы, например слеши, которые необходимо закодировать.
      Функция <function>rawurlencode</function> может использоваться для кодирования
      составных частей URI-адреса.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry xml:id="mongodb-driver-manager.construct-urioptions">
    <term><parameter>uriOptions</parameter></term>
    <listitem>
     <para>
      Дополнительные
      <link xlink:href="&url.mongodb.docs;reference/connection-string/#connections-connection-options">параметры строки подключения</link>,
      которые будут перезаписывать любые параметры с тем же именем в параметре 
      <parameter>uri</parameter>. 
     </para>
     <para>
      <table>
       <title>uriOptions</title>
       <tgroup cols="3">
        <thead>
         <row>
          <entry>Название опции</entry>
          <entry>Тип</entry>
          <entry>Описание</entry>
         </row>
        </thead>
        <tbody>
         <row>
          <entry>appname</entry>
          <entry><type>string</type></entry>
          <entry>
           <para>
            В MongoDB 3.4+ появилась возможность добавлять аннотации к соединениям с метаданными,
            предоставляемыми подключающимся клиентом. Эти метаданные включаются в журналы
            логирования сервера при установлении соединения, а также записываются в журналы
            медленных запросов, если включено профилирование базы данных.
           </para>
           <para>
            Эта опция может использоваться для указания имени приложения, которое будет
            включено в метаданные. Значение не может превышать 128 символов.
           </para>
          </entry>
         </row>
         <row>
          <entry>authMechanism</entry>
          <entry><type>string</type></entry>
          <entry>
           <para>
            Механизм аутентификации, который MongoDB будет использовать для аутентификации
            соединения. Для просмотра дополнительных сведений и списка поддерживаемых
            значений, см. раздел
            <link xlink:href="&url.mongodb.docs;reference/connection-string/#urioption.authMechanism">Параметры аутентификации</link>
            в руководстве MongoDB.
           </para>
          </entry>
         </row>
         <row>
          <entry>authMechanismProperties</entry>
          <entry><type>array</type></entry>
          <entry>
           <para>
            Свойства для выбранного механизма аутентификации. Для просмотра дополнительных сведений и списка поддерживаемых
            значений, см. раздел
            <link xlink:href="&url.mongodb.specs;/blob/master/source/auth/auth.rst#auth-related-options">Спецификация аутентификации драйвера</link>.
           </para>
           <note>
            <simpara>
             Если не указана в строке URI-адреса, эта опция представляется
             в виде массива пар ключ-значение. Ключи и значения в этом массиве должны быть строками.
            </simpara>
           </note>
          </entry>
         </row>
         <row>
          <entry>authSource</entry>
          <entry><type>string</type></entry>
          <entry>
           <para>
            Имя базы данных, связанное с учетными данными пользователя. По умолчанию
            используется компонент базы данных из URI-адреса соединения.
           </para>
           <para>
            Для механизмов аутентификации, которые делегируют хранение учетных данных
            другим службам (например, GSSAPI), значение должно быть
            <literal>"$external"</literal>.
           </para>
          </entry>
         </row>
         <row>
          <entry>canonicalizeHostname</entry>
          <entry><type>boolean</type></entry>
          <entry>
           <para>
            Если &true;, драйвер будет преобразовывать реальное имя хоста для
            IP-адреса сервера перед аутентификацией через SASL. Некоторые базовые
            слои GSSAPI уже делают это, но эта функциональность может быть отключена
            в их конфигурации (например, <literal>krb.conf</literal>). По умолчанию
            &false;.
           </para>
           <para>
            Этот параметр является устаревшим псевдонимом для свойства
            <literal>"CANONICALIZE_HOST_NAME"</literal> параметра URI
            <literal>"authMechanismProperties"</literal>.
           </para>
          </entry>
         </row>
         <row>
          <entry>compressors</entry>
          <entry><type>string</type></entry>
          <entry>
           <para>
            Имеющий приоритет, список разделенных запятыми компрессоров, 
            которые клиент хочет использовать. Сообщения сжаты только в том случае,
            если клиент и сервер совместно используют любые компрессоры,
            а компрессор, используемый в каждом направлении, 
            будет зависеть от индивидуальной конфигурации сервера или драйвера.
            Смотрите <link xlink:href="&url.mongodb.specs;/blob/master/source/compression/OP_COMPRESSED.rst#compressors">Спецификация компресии драйвера</link>
            для получения дополнительной информации.
           </para>
          </entry>
         </row>
         <row xml:id="mongodb-driver-manager.construct-urioptions.connecttimeoutms">
          <entry>connectTimeoutMS</entry>
          <entry><type>integer</type></entry>
          <entry>
           <para>
            Время в миллисекунд, чтобы попытаться подключиться перед тайм-аутом.
            По умолчанию - 10 000 миллисекунд.
           </para>
          </entry>
         </row>
         <row>
          <entry>gssapiServiceName</entry>
          <entry><type>string</type></entry>
          <entry>
           <para>
            Устанавливает имя службы Kerberos при подключении к керберизованными
            экземплярам MongoDB. Это значение должно совпадать именем службы,
            установленным в экземплярах MongoDB (т.е. с параметром сервер,
            <link xlink:href="&url.mongodb.docs;reference/parameters/#param.saslServiceName">saslServiceName</link>
            ). По умолчанию используется <literal>"mongodb"</literal>.
           </para>
           <para>
            Этот параметр является устаревшим псевдонимом для свойства
            <literal>"SERVICE_NAME"</literal> параметра URI
            <literal>"authMechanismProperties"</literal>.
           </para>
          </entry>
         </row>
         <row>
          <entry>heartbeatFrequencyMS</entry>
          <entry><type>integer</type></entry>
          <entry>
           <para>
            Задает интервал в миллисекундах между проверками драйвера
            топологии MongoDB, отсчитываемыми с конца предыдущей проверки 
            до начала следующей. По умолчанию - 60 000
            миллисекунд.
           </para>
           <para>
            Согласно
            <link xlink:href="&url.mongodb.sdam;#heartbeatfrequencyms">Спецификации по обнаружению и мониторингу сервера</link>,
            это значение не может быть меньше 500 миллисекунд.
           </para>
          </entry>
         </row>
         <row>
          <entry>journal</entry>
          <entry><type>boolean</type></entry>
          <entry>
           <para>
            Соответствует параметру гарантий записи <parameter>journal</parameter>.
            Если &true;, для записи будет требоваться подтверждение от
            MongoDB, что операция была записана в журнал. Подробнее
            см. <classname>MongoDB\Driver\WriteConcern</classname>.
           </para>
          </entry>
         </row>
         <row>
          <entry>localThresholdMS</entry>
          <entry><type>integer</type></entry>
          <entry>
           <para>
            Размер в миллисекундах окна задержки для выбора среди
            нескольких подходящих экземпляров MongoDB при разрешении предпочтения
            чтения. По умолчанию - 15 миллисекунд.
           </para>
          </entry>
         </row>
         <row>
          <entry>maxStalenessSeconds</entry>
          <entry><type>integer</type></entry>
          <entry>
           <para>
            Соответствует параметру предпочтениям чтения
            <literal>"maxStalenessSeconds"</literal>. Указывает в секундах насколько
            устаревшим может быть вторичный узел в наборе реплик, прежде чем клиент перестанет
            его использовать для операций чтения. По умолчанию не задано максимальное отставание репликации (staleness)
            и клиенты не будут учитывать отставание вторичного узла при выборе
            при выборе направления операции чтения. Подробнее см.
            <classname>MongoDB\Driver\ReadPreference</classname>.
           </para>
           <para>
            Если указана, максимальное отставание должно быть 32-битным целым числом,
            большим или равным
            <constant>MongoDB\Driver\ReadPreference::SMALLEST_MAX_STALENESS_SECONDS</constant>
            (т.е. 90 секунд).
           </para>
          </entry>
         </row>
         <row>
          <entry>password</entry>
          <entry><type>string</type></entry>
          <entry>
           Пароль для аутентификации пользователя. Эта опция полезна,
           если пароль содержит специальные символы, которые в противном случае
           должны были закодированы для URI-адреса подключения.
          </entry>
         </row>
         <row>
          <entry>readConcernLevel</entry>
          <entry><type>string</type></entry>
          <entry>
           Соответствует параметру гарантий чтения <parameter>level</parameter>
           Определяет уровень изоляции чтения. Подробнее см.
           <classname>MongoDB\Driver\ReadConcern</classname>.
          </entry>
         </row>
         <row>
          <entry>readPreference</entry>
          <entry><type>string</type></entry>
          <entry>
           <para>
            Соответствует параметру предпочтениям чтения <parameter>mode</parameter>
            По умолчанию - <literal>"primary"</literal>.
            Подробнее см. <classname>MongoDB\Driver\ReadPreference</classname>.
           </para>
          </entry>
         </row>
         <row>
          <entry>readPreferenceTags</entry>
          <entry><type>array</type></entry>
          <entry>
           <para>
            Соответствует параметру предпочтениям чтения <parameter>tagSets</parameter>.
            Наборы тегов позволяют настраивать операции чтения для опреденных
            членов набора реплики. Подробнее см.
            <classname>MongoDB\Driver\ReadPreference</classname>.
           </para>
           <note>
            <simpara>
             Если в строке URI не указано, этот параметр представляется как
             как массив, соответствующий формату, ожидаемому
             <function>MongoDB\Driver\ReadPreference::__construct</function>.
            </simpara>
           </note>
          </entry>
         </row>
         <row>
          <entry>replicaSet</entry>
          <entry><type>string</type></entry>
          <entry>
           <para>
            Задает имя набора реплики.
           </para>
          </entry>
         </row>
         <row>
          <entry>retryWrites</entry>
          <entry><type>boolean</type></entry>
          <entry>
           <para>
            Если &true; драйвер автоматически повторить определенные операции записи,
            которые не выполнились из-за временных ошибок сети или выбора реплик.
            По умолчанию &false;.
           </para>
           <para>
            См.
            <link xlink:href="&url.mongodb.docs;core/distributed-queries/#retryable-writes">Retryable Writes</link>
            в руководстве MongoDB для получения дополнительной информации.
           </para>
          </entry>
         </row>
         <row>
          <entry>safe</entry>
          <entry><type>boolean</type></entry>
          <entry>
           <para>
            Если &true;, указывает <literal>1</literal> для
            параметра <parameter>w</parameter>
            гарантии записи по умолчанию. Если &false;, указывается 
            <literal>0</literal>. Подробнее см.
            <classname>MongoDB\Driver\WriteConcern</classname>.
           </para>
           <para>
            Эта опция устарела и не должна использоваться.
           </para>
          </entry>
         </row>
         <row xml:id="mongodb-driver-manager.construct-urioptions.serverselectiontimeoutms">
          <entry>serverSelectionTimeoutMS</entry>
          <entry><type>integer</type></entry>
          <entry>
           <para>
            Указывает как долго в миллисекунд блокировать выбор сервера
            перед выбросом исключения. По умолчанию - 30 000 миллисекунд.
           </para>
          </entry>
         </row>
         <row>
          <entry>serverSelectionTryOnce</entry>
          <entry><type>boolean</type></entry>
          <entry>
           <para>
            Если &true;, то сообщает драйверу сканировать развертывание MongoDB
            только один раз после неудачной попытки выбора сервера, а затем либо
            выбрать сервер или создать ошибку. Когда &false;, драйвер блокирует выбор и
            выполняет поиск сервера до истечения времени, указанного в параметре
            <literal>"serverSelectionTimeoutMS"</literal>. По умолчанию -
            &true;.
           </para>
          </entry>
         </row>
         <row>
          <entry>slaveOk</entry>
          <entry><type>boolean</type></entry>
          <entry>
           <para>
            Указывает <literal>"secondaryPreferred"</literal> для режима
            предпочтения чтения, если &true;. Подробности см.
            <classname>MongoDB\Driver\ReadPreference</classname>.
           </para>
           <para>
            Эта опция устарела и не должна использоваться.
           </para>
          </entry>
         </row>
         <row>
          <entry>socketCheckIntervalMS</entry>
          <entry><type>integer</type></entry>
          <entry>
           <para>
            Если сокет не использовался в последнее время, драйвер должен проверить
            с помощью команды <literal>isMaster</literal>, прежде чем использовать
            его для любой операции. По умолчанию - 5 000 миллисекунд.
           </para>
          </entry>
         </row>
         <row>
          <entry>socketTimeoutMS</entry>
          <entry><type>integer</type></entry>
          <entry>
           <para>
            Время в миллисекундах, чтобы попытаться отправить или получить в сокет
            до истечения времени. По умолчанию - 300 000 миллисекунд (т.е. 5 минут).
           </para>
          </entry>
         </row>
         <row>
          <entry>ssl</entry>
          <entry><type>boolean</type></entry>
          <entry>
           <para>
            Создает соединение с TLS/SSL, если &true;. По умолчанию -
            &false;.
           </para>
          </entry>
         </row>
         <row>
          <entry>username</entry>
          <entry><type>string</type></entry>
          <entry>
           Имя пользователя для аутентификации. Эта опция полезна,
           если имя пользователя содержит специальные символы, которые в противном случае
           должны были быть закодированы в URL для URI-адреса подключения.
          </entry>
         </row>
         <row>
          <entry>w</entry>
          <entry><type>integer|string</type></entry>
          <entry>
           <para>
            Соответствует параметру гарантий записи <parameter>w</parameter>.
            Подробнее см.
            <classname>MongoDB\Driver\WriteConcern</classname>.
           </para>
          </entry>
         </row>
         <row>
          <entry>wTimeoutMS</entry>
          <entry><type>integer|string</type></entry>
          <entry>
           <para>
            Соответствует параметру гарантий записи <parameter>wtimeout</parameter>.
            Указывает срок в миллисекундах для гарантии записи. Подробнее см.
            <classname>MongoDB\Driver\WriteConcern</classname>.
           </para>
           <para>
            Если указан, <literal>wTimeoutMS</literal> должен быть
            32-битным целым числом со знаком, большим или равным нулю.
           </para>
          </entry>
         </row>
         <row>
          <entry>zlibCompressionLevel</entry>
          <entry><type>integer</type></entry>
          <entry>
           <para>
            Указывает уровень сжатия для использования zlib. Эта
            опция ничего не делает, если <literal>zlib</literal> не включен в URL опции
            <literal>"compressors"</literal>. Смотрите 
            <link xlink:href="&url.mongodb.specs;/blob/master/source/compression/OP_COMPRESSED.rst#zlibcompressionlevel">Спецификация компрессии драйвера</link>
            для получения дополнительной информации.
           </para>
          </entry>
         </row>
        </tbody>
       </tgroup>
      </table>
     </para>
    </listitem>
   </varlistentry>
   <varlistentry xml:id="mongodb-driver-manager.construct-driveroptions">
    <term><parameter>driverOptions</parameter></term>
    <listitem>
     <para>
      <table>
       <title>driverOptions</title>
       <tgroup cols="3">
        <thead>
         <row>
          <entry>Опция</entry>
          <entry>Тип</entry>
          <entry>Описание</entry>
         </row>
        </thead>
        <tbody>
         <row>
          <entry>allow_invalid_hostname</entry>
          <entry><type>boolean</type></entry>
          <entry>
           <para>
            Отключает проверку имени хоста, если &true;. По умолчанию - &false;.
           </para>
           <para>
            Разрешение недопустимых имен хоста может привести к атаке типа
            <link xlink:href="&url.mongodb.wiki.mitm;">"человек посередине" (man-in-the-middle)</link>.
           </para>
          </entry>
         </row>
         <row>
          <entry>ca_dir</entry>
          <entry><type>string</type></entry>
          <entry>
           <para>
            Путь к корректно захешированному каталогу сертификатов. По умолчанию будет
            использоваться хранилище системных сертификатов.
           </para>
           <para>
            Если не указан, то используется устаревший параметр
            SSL-контекста <literal>"capath"</literal>.
           </para>
          </entry>
         </row>
         <row>
          <entry>ca_file</entry>
          <entry><type>string</type></entry>
          <entry>
           <para>
            Путь к файлу центра сертификации. По умолчанию будет
            использоваться хранилище системных сертификатов.
           </para>
           <para>
            Если не указан, то используется устаревший параметр
            SSL-контекста  <literal>"cafile"</literal>
           </para>
          </entry>
         </row>
         <row>
          <entry>crl_file</entry>
          <entry><type>string</type></entry>
          <entry>Путь к файлу списка аннулированных сертификатов.</entry>
         </row>
         <row>
          <entry>pem_file</entry>
          <entry><type>string</type></entry>
          <entry>
           <para>
            Путь к сертификату в формате PEM для аутентификации клиента.
           </para>
           <para>
            Если не указан, то используется устаревший параметр
            SSL-контекста <literal>"local_cert"</literal>.
           </para>
          </entry>
         </row>
         <row>
          <entry>pem_pwd</entry>
          <entry><type>string</type></entry>
          <entry>
           <para>
            Парольная фраза к PEM-закодированному сертификату (если есть).
           </para>
           <para>
            Если не указан, то используется устаревший параметр
            SSL-контекста <literal>"passphrase"</literal>.
           </para>
          </entry>
         </row>
         <row>
          <entry>context</entry>
          <entry><type>resource</type></entry>
          <entry>
           <para>
            <link linkend="context.ssl">Опции SSL-контекста</link>, которые будут
            использоваться в качестве запасного варианта
            для других параметров драйвера (как указано). Обратите внимание, что
            драйвер не имеет отношения к контексту потока по умолчанию.
           </para>
           <para>
            Эта опция поддерживается для обратной совместимости, но ее следует
            следует считать устаревшей.
           </para>
          </entry>
         </row>
         <row>
          <entry>weak_cert_validation</entry>
          <entry><type>boolean</type></entry>
          <entry>
           <para>
            Отключает проверку сертифика, если &true;. По умолчанию - &false;
           </para>
           <para>
            Если не указан, то используется устаревший параметр
            SSL-контекста <literal>"allow_self_signed"</literal>.
           </para>
          </entry>
         </row>
        </tbody>
       </tgroup>
      </table>
     </para>
    </listitem>
   </varlistentry>
  </variablelist>
 </refsect1>
 
 <refsect1 role="errors">
  &reftitle.errors;
  <simplelist>
   &mongodb.throws.argumentparsing;
   <member>При неверном формате <parameter>uri</parameter> выбрасывает исключение <classname>MongoDB\Driver\Exception\RuntimeException</classname>.</member>
  </simplelist>
 </refsect1>
 
 <refsect1 role="changelog">
  &reftitle.changelog;
  <para>
   <informaltable>
    <tgroup cols="2">
     <thead>
      <row>
       <entry>&Version;</entry>
       <entry>&Description;</entry>
      </row>
     </thead>
     <tbody>
      <row>
       <entry>1.5.0</entry>
       <entry>
        <para>
         <literal>"wtimeoutMS"</literal> теперь всегда проверяется и применяется к
         гарантии записи. Ранее эта опция игнорировалась, если
         <literal>"w"</literal> был &lt;= 1, поскольку тайм-аут применяется только к
         репликации.
        </para>
       </entry>
      </row>
      <row>
       <entry>1.4.0</entry>
       <entry>
        <para>
         Добавлены опции URI <literal>"compressors"</literal>,
         <literal>"retryWrites"</literal> и
         <literal>"zlibCompressionLevel"</literal>.
        </para>
       </entry>
      </row>
      <row>
       <entry>1.3.0</entry>
       <entry>
        <para>
         В аргументе <parameter>uriOptions</parameter> теперь есть опции
         <literal>"authMechanism"</literal> и
         <literal>"authMechanismProperties"</literal>. Раньше эти опции
         поддерживались только в аргументе <parameter>uri</parameter>.
        </para>
       </entry>
      </row>
      <row>
       <entry>1.2.0</entry>
       <entry>
        <para>
         Аргумент <parameter>uri</parameter> по умолчанию теперь
         <literal>"mongodb://127.0.0.1/"</literal>. Порт по умолчанию не изменился -
         <literal>27017</literal>.
        </para>
        <para>
         Добавлен URI-параметр <literal>"appname"</literal>.
        </para>
        <para>
         Добавлены параметры драйвера <literal>"allow_invalid_hostname"</literal>,
         <literal>"ca_file"</literal>, <literal>"ca_dir"</literal>,
         <literal>"clr_file"</literal>, <literal>"pem_file"</literal>,
         <literal>"pem_pwd"</literal> и
         <literal>"weak_cert_validation"</literal>.
        </para>
        <para>
         API потоков PHP больше не используется для соединения с сокетом. Параметр URI
         <literal>"connectTimeoutMS"</literal> теперь по умолчанию равен 10
         секунд вместо
         <link linkend="ini.default-socket-timeout">default_socket_timeout</link>
         в предыдущих версиях. Кроме того, драйвер больше не поддерживает все
         <link linkend="context.ssl">параметры SSL-контекста</link> через параметр драйвера
         <literal>"context"</literal>.
        </para>
       </entry>
      </row>
      <row>
       <entry>1.1.0</entry>
       <entry>
        <para>
         Аргумент <parameter>uri</parameter> является необязательный и по умолчанию равен
         <literal>"mongodb://localhost:27017/"</literal>.
        </para>
       </entry>
      </row>
     </tbody>
    </tgroup>
   </informaltable>
  </para>
 </refsect1>
 
 <refsect1 role="examples">
  &reftitle.examples;
  <example>
   <title>Примеры использования <function>MongoDB\Driver\Manager::__construct</function></title>
   <para>Подключение к автономному узлу MongoDB:</para>
   <programlisting role="php">
<![CDATA[
<?php

$manager = new MongoDB\Driver\Manager("mongodb://example.com:27017");

?>
]]>
    </programlisting>
    <para>
     Подключение к автономному узлу MongoDB через доменный сокет Unix. Путь сокета
     может содержать специальные символы, например слеши, которые должны закодированы
     с помощью <function>rawurlencode</function>.
    </para>
    <programlisting role="php">
<![CDATA[
<?php

$manager = new MongoDB\Driver\Manager("mongodb://" . rawurlencode("/tmp/mongodb-27017.sock"));

?>
]]>
    </programlisting>
    <para>Подключение к набору реплик:</para>
    <programlisting role="php">
<![CDATA[
<?php

$manager = new MongoDB\Driver\Manager("mongodb://rs1.example.com,rs2.example.com/?replicaSet=myReplicaSet");

?>
]]>
    </programlisting>
    <para>Подключение к сегментированному кластеру (т.е. одну или нескольким экземплярам mongos):</para>
    <programlisting role="php">
<![CDATA[
<?php

$manager = new MongoDB\Driver\Manager("mongodb://mongos1.example.com,mongos2.example.com/");

?>
]]>
    </programlisting>
    <para>Подключение к MongoDB с учетными данными аутентификации для конкретного пользователя и базы данных:</para>
    <programlisting role="php">
<![CDATA[
<?php

$manager = new MongoDB\Driver\Manager("mongodb://myusername:mypassword@example.com/mydatabase");

?>
]]>
    </programlisting>
    
    <para>
     Подключение к MongoDB с учетными данными аутентификации для конкретного пользователя и базы данных,
     где имя пользователя или пароль содержат специальные
     символы (e.g. <literal>@</literal>, <literal>:</literal>,
     <literal>%</literal>). В следующем примере, строка с паролем
     <literal>myp@ss:w%rd</literal> была вручную экранирована; однако
     <function>rawurlencode</function> может использоваться для экранирования URI-компонетов,
     которые могут содержать специальные символы.
    </para>
    <programlisting role="php">
<![CDATA[
<?php

$manager = new MongoDB\Driver\Manager("mongodb://myusername:myp%40ss%3Aw%25rd@example.com/mydatabase");

?>
]]>
    </programlisting>
    
    <para>Подключение к MongoDB с аутентификацией X509:</para>
    <programlisting role="php">
<![CDATA[
<?php

$manager = new MongoDB\Driver\Manager(
    "mongodb://example.com/?ssl=true&authMechanism=MONGODB-X509",
    [],
    [
        "pem_file" => "/path/to/client.pem",
    ]
);
?>
]]>
    </programlisting>
   </example>
 </refsect1>
 
 <refsect1 role="seealso">
  &reftitle.seealso;
  <simplelist>
   <member><link linkend="mongodb.connection-handling">Обработка подключения и сохранение</link></member>
   <member><link xlink:href="&url.mongodb.docs;reference/connection-string/">Формат строки соединения MongoDB</link></member>
  </simplelist>
 </refsect1>
 
</refentry>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"~/.phpdoc/manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
vim600: syn=xml fen fdm=syntax fdl=2 si
vim: et tw=78 syn=sgml
vi: ts=1 sw=1
-->
