<?xml version="1.0" encoding="utf-8"?>
<!-- EN-Revision: 322205 Maintainer: tmn Status: ready -->
<!-- Reviewed: no -->
<!-- $Revision$ -->
<refentry xml:id='function.domnode-append-child' xmlns="http://docbook.org/ns/docbook">
 <refnamediv>
  <refname>DomNode::append_child</refname>
  <refpurpose>

   Добавляет нового сына в конец списка сыновей
  </refpurpose>
 </refnamediv>
 <refsect1 role="description">
  &reftitle.description;
  <methodsynopsis>
   <type>DOMNode</type><methodname>DOMNode::append_child</methodname>
   <methodparam><type>DOMNode</type><parameter>newnode</parameter></methodparam>
  </methodsynopsis>
  <para>


   Эта функция добавляет сына к существующему списку сыновей, либо создает
   список.
  </para>
 </refsect1>
 <refsect1 role="parameters">
  &reftitle.parameters;
  <para>
   <variablelist>
    <varlistentry>
     <term><parameter>newnode</parameter></term>
     <listitem>
      <para>

       Добавляемый узел. Может быть создан посредством например 
       <xref linkend="function.domdocument-create-element" />,
       <xref linkend="function.domdocument-create-text-node" /> и т.п. или 

       просто используя другой узел.
      </para>
      <note>
       <para>
        Невозможно этом методом добавить узел 
        <classname>DOMAttribute</classname>. Используйте вместо него 
        функцию <xref linkend="function.domelement-set-attribute" />.

       </para>
      </note>
     </listitem>
    </varlistentry>
   </variablelist>
  </para>
 </refsect1>
 <refsect1 role="returnvalues">
  &reftitle.returnvalues;
  <para>
   Возвращает добавленный узел&return.falseforfailure;.
  </para>
 </refsect1>
 <refsect1 role="changelog">
  &reftitle.changelog;
  <para>
   <informaltable>
    <tgroup cols="2">
     <thead>
      <row>
       <entry>&Version;</entry>
       <entry>&Description;</entry>
      </row>
     </thead>
     <tbody>
      <row>
       <entry>4.3.0</entry>
       <entry>

        Вставка узла из другого документа больше не поддерживается.
       </entry>
      </row>
      <row>
       <entry>4.3.0</entry>
       <entry>









        В отличие от версий PHP раньше 4.3.0 новый сын дублируется до добавления.
        Таким образом новый сын является полной копией, которую можно
        модифицировать, не изменяя состояния узла, переданного в функцию в 
        качестве аргумента. Если переданный узел имел сыновей, то они также
        будут дублированы, что сильно упрощает дублирование больших частей 
        XML документа. Возвращаемым значением является добавленный сын. Если
        планируется дальнейшая модификация добавленного сына, необходимо 
        использовать именно возвращенный узел.
       </entry>
      </row>
      <row>
       <entry>4.3.0 и 4.3.1</entry>
       <entry>
        Если новый сын <parameter>newnode</parameter> уже является сыном 

        DomNode, то он не включается в существующий контекст. Поэтому 
        <parameter>newnode</parameter> перемещается и ничего не копирует.


        Это поведение соответствует спецификациям W3C. Если требуется 
        старое поведение, используйте функцию <xref 
        linkend="function.domnode-clone-node" /> перед добавлением узла.
       </entry>
      </row>
      <row>
       <entry>4.3.2</entry>
       <entry>
        Если новый сын <parameter>newnode</parameter> уже находится в дереве, 

        он отсоединяется от своего контекста. Применяются те же правила.
       </entry>
      </row>
     </tbody>
    </tgroup>
   </informaltable>
  </para>
 </refsect1> 
 <refsect1 role="examples">
  &reftitle.examples;
  <para>

   Следующий пример добавляет новый элемент в чистый документ и устанавливает 
   атрибут <literal>align</literal> в значение <literal>left</literal>.
  </para>
  <para>
   <example>
    <title>Добавление сына</title>
    <programlisting role="php">
<![CDATA[
<?php
$doc = domxml_new_doc("1.0");
$node = $doc->create_element("para");
$newnode = $doc->append_child($node);
$newnode->set_attribute("align", "left");
?>
]]>
    </programlisting>
   </example>
  </para>
  <para>

   Пример выше можно записать в следующем виде:
  </para>
  <para>
   <example>
    <title>Добавление сына</title>
    <programlisting role="php">
<![CDATA[
<?php
$doc = domxml_new_doc("1.0");
$node = $doc->create_element("para");
$node->set_attribute("align", "left");
$newnode = $doc->append_child($node);
?>
]]>
    </programlisting>
   </example>
  </para>
  <para>




   Ниже представлен более исчерпывающий пример. Вначале производится поиск
   определенного элемента, затем он дублируется вместе со всеми потомками и
   добавляется как брат. В итоге новый атрибут добавлен к одному из сыновей 
   нового брата, и документ скопирован целиком.
  </para>
  <para>
   <example>
    <title>Добавление сына</title>
    <programlisting role="php">
<![CDATA[
<?php
include("example.inc");

if (!$dom = domxml_open_mem($xmlstr)) {

  echo "Ошибка при разборе документа\n";
  exit;
}

$elements = $dom->get_elements_by_tagname("informaltable");
print_r($elements);
$element = $elements[0];

$parent = $element->parent_node();
$newnode = $parent->append_child($element);
$children = $newnode->children();
$attr = $children[1]->set_attribute("align", "left");

$xmlfile = $dom->dump_mem();
echo htmlentities($xmlfile);
?>
]]>
    </programlisting>
   </example>
  </para>
  <para>

   Пример выше также можно выполнить с помощью
   <xref linkend="function.domnode-insert-before" /> вместо
   <xref linkend="function.domnode-append-child" />.
  </para>
 </refsect1>
 <refsect1 role="migration">
  <title>Переход на PHP 5</title>
  <para>
   Необходимо использовать <xref linkend='domnode.appendchild' />.
  </para>
 </refsect1>
 <refsect1 role="seealso">
  &reftitle.seealso;
  <para>
   <simplelist>
    <member><xref linkend="function.domnode-insert-before" /></member>
    <member><xref linkend="function.domnode-clone-node" /></member>
   </simplelist>
  </para>
 </refsect1>
</refentry>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"~/.phpdoc/manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
vim600: syn=xml fen fdm=syntax fdl=2 si
vim: et tw=78 syn=sgml
vi: ts=1 sw=1
-->
